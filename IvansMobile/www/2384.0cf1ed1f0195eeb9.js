"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2384],{2384:(b,d,r)=>{r.r(d),r.d(d,{RestablecerContraPageModule:()=>C});var g=r(6814),c=r(95),a=r(7852),u=r(7168),h=r(5861),e=r(6242),p=r(6506),m=r(8513);const v=[{path:"",component:(()=>{class i{constructor(t,n,o,s,l){this.menuCtrl=t,this.router=n,this.alerta=o,this.bd=s,this.sesion=l,this.clave="",this.claveRep="",this.flag=!0,this.msj="",this.msjClave="",this.msjRepClave="",this.correoUser="",this.usuario=[{idusuario:"",rut:"",dvrut:"",nombre:"",apellido:"",telefono:"",correo:"",clave:"",direccion:"",fotousuario:"",respuesta:"",rolu:"",preguntau:""}]}irHome(){this.router.navigate([""])}irCli(){this.router.navigate(["/home-cli"])}irAdm(){this.router.navigate(["/home-adm"])}abrirSuperior(){this.menuCtrl.enable(!0,"superior"),this.menuCtrl.open("superior")}abrirCategorias(){this.menuCtrl.enable(!0,"categorias"),this.menuCtrl.open("categorias")}irIniSesion(){this.router.navigate(["/ini-sesion"])}editarClave(){var t=this;return(0,h.Z)(function*(){yield t.bd.modificarClave(t.usuario.idusuario,t.clave),yield t.bd.presentAlert("La contrase\xf1a se ha modificado con \xe9xito")})()}envioValido(){var t=this;return(0,h.Z)(function*(){t.flag=!0,t.claveValida(),t.claveRepValid(),!0===t.flag&&(yield t.editarClave(),t.sesion.setCorreoSesion(""),t.irIniSesion())})()}claveValida(){this.msjClave="",0===this.clave.length?(this.flag=!1,this.msjClave="Debe llenar este campo"):(this.contieneMayuscula(this.clave)||(this.flag=!1,this.msjClave+="La contrase\xf1a debe poseer una may\xfascula\n"),this.contieneMinuscula(this.clave)||(this.flag=!1,this.msjClave+="La contrase\xf1a debe poseer una min\xfascula\n"),this.contieneNumero(this.clave)||(this.flag=!1,this.msjClave+="La contrase\xf1a debe poseer un n\xfamero\n"),this.contieneCaracterEspecial(this.clave)||(this.flag=!1,this.msjClave+="La contrase\xf1a debe poseer un car\xe1cter especial\n"),this.clave.length<=8&&(this.flag=!1,this.msjClave+="La contrase\xf1a debe tener al menos 8 caracteres de \nlongitud\n"))}claveRepValid(){this.msjRepClave="",0===this.claveRep.length?(this.flag=!1,this.msjRepClave="Debe llenar este campo"):this.claveRep!=this.clave&&(this.flag=!1,this.msjRepClave+="La contrase\xf1a no se ha repetido correctamente\n")}contieneMayuscula(t){return/[A-Z]/.test(t)}contieneMinuscula(t){return/[a-z]/.test(t)}contieneCaracterEspecial(t){return/[!@#$%^&*()_+{}\[\]:;<>,.?~\\/-]/.test(t)}contieneNumero(t){return/\d/.test(t)}presentAlert(t){var n=this;return(0,h.Z)(function*(){yield(yield n.alerta.create({header:"Alerta",subHeader:"Mensaje importante",message:t,buttons:["Vale"]})).present()})()}ngOnInit(){this.correoUser=localStorage.getItem("correo"),this.bd.dbState().subscribe(t=>{t&&(this.bd.buscarPorCorreo(this.correoUser),this.bd.fetchUsuario().subscribe(n=>{n.length>0&&(this.usuario=n[0])}))})}static#e=this.\u0275fac=function(n){return new(n||i)(e.Y36(a._q),e.Y36(u.F0),e.Y36(a.Br),e.Y36(p.N),e.Y36(m.J))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-restablecer-contra"]],decls:34,vars:6,consts:[[1,"cabecera",3,"translucent"],[1,"logo-contenedor"],["src","/assets/logo.png","alt","No hay logo"],["color","paleta",1,"toolbar-c"],["slot","end",1,"boton-guesa"],[3,"click"],[1,"titulo",3,"click"],[1,"content-fondo",3,"fullscreen"],[1,"nombre-pag"],[1,"contenedor-form"],["labelPlacement","stacked","label","Clave Nueva","type","password","placeholder","Clave","maxlength","10",3,"ngModel","ngModelChange"],[1,"validacion"],["labelPlacement","stacked","label","Repetir Clave Nueva","type","password","placeholder","Clave","maxlength","10",3,"ngModel","ngModelChange"],[2,"text-align","center"],["shape","round",3,"click"]],template:function(n,o){1&n&&(e.TgZ(0,"ion-header",0)(1,"div",1),e._UZ(2,"ion-img",2),e.qZA(),e.TgZ(3,"ion-toolbar",3)(4,"ion-buttons",4)(5,"ion-menu-button",5),e.NdJ("click",function(){return o.abrirSuperior()}),e.qZA()(),e.TgZ(6,"ion-title",6),e.NdJ("click",function(){return o.irHome()}),e._uU(7," Ivan's "),e.qZA()()(),e.TgZ(8,"ion-content",7)(9,"ion-grid")(10,"div")(11,"ion-row")(12,"ion-col")(13,"h1",8),e._uU(14,"Cambio de Contrase\xf1a"),e.qZA()()()(),e.TgZ(15,"div",9)(16,"ion-row")(17,"ion-col")(18,"ion-input",10),e.NdJ("ngModelChange",function(l){return o.clave=l}),e.qZA()()(),e.TgZ(19,"ion-row")(20,"ion-col")(21,"pre",11),e._uU(22),e.qZA()()(),e.TgZ(23,"ion-row")(24,"ion-col")(25,"ion-input",12),e.NdJ("ngModelChange",function(l){return o.claveRep=l}),e.qZA()()(),e.TgZ(26,"ion-row")(27,"ion-col")(28,"pre",11),e._uU(29),e.qZA()()(),e.TgZ(30,"ion-row")(31,"ion-col",13)(32,"ion-button",14),e.NdJ("click",function(){return o.envioValido()}),e._uU(33," Confirmar "),e.qZA()()()()()()),2&n&&(e.Q6J("translucent",!0),e.xp6(8),e.Q6J("fullscreen",!0),e.xp6(10),e.Q6J("ngModel",o.clave),e.xp6(4),e.Oqu(o.msjClave),e.xp6(3),e.Q6J("ngModel",o.claveRep),e.xp6(4),e.Oqu(o.msjRepClave))},dependencies:[c.JJ,c.nD,c.On,a.YG,a.Sm,a.wI,a.W2,a.jY,a.Gu,a.Xz,a.pK,a.fG,a.Nd,a.wd,a.sr,a.j9],styles:[".contenedor-form[_ngcontent-%COMP%]{margin-top:25%}"]})}return i})()}];let f=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=e.oAB({type:i});static#a=this.\u0275inj=e.cJS({imports:[u.Bz.forChild(v),u.Bz]})}return i})(),C=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=e.oAB({type:i});static#a=this.\u0275inj=e.cJS({imports:[g.ez,c.u5,a.Pc,f]})}return i})()}}]);
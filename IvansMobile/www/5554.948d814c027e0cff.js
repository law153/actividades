"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5554],{5554:(b,d,r)=>{r.r(d),r.d(d,{CambiarContraPageModule:()=>f});var h=r(6814),c=r(95),t=r(7852),u=r(7168),g=r(5861),e=r(6242),m=r(6506),v=r(8513);const p=[{path:"",component:(()=>{class o{constructor(a,i,n,s,l){this.router=a,this.menuCtrl=i,this.alerta=n,this.bd=s,this.sesion=l,this.claveOld="",this.claveNueva="",this.claveRep="",this.flag=!0,this.msj="",this.msjClave="",this.msjRepClave="",this.msjClaveOld="",this.correoUser="",this.usuario=[{idusuario:"",rut:"",dvrut:"",nombre:"",apellido:"",telefono:"",correo:"",clave:"",direccion:"",fotousuario:"",respuesta:"",rolu:"",preguntau:""}]}irHomeCli(){this.router.navigate([""])}irHome(){this.router.navigate([""])}abrirSuperior(){this.menuCtrl.enable(!0,"superior"),this.menuCtrl.open("superior")}abrirCategorias(){this.menuCtrl.enable(!0,"categorias"),this.menuCtrl.open("categorias")}editarClave(){this.bd.modificarClave(this.usuario.idusuario,this.claveNueva),this.bd.presentAlert("La contrase\xf1a se ha modificado con \xe9xito")}envioValido(){this.flag=!0,this.claveOldValida(),this.claveNuevaValida(),this.claveRepValid(),!0===this.flag&&(this.editarClave(),this.irHomeCli())}claveNuevaValida(){this.msjClave="",0===this.claveNueva.length?(this.flag=!1,this.msjClave="Debe llenar este campo"):(this.contieneMayuscula(this.claveNueva)||(this.flag=!1,this.msjClave+="La contrase\xf1a debe poseer una may\xfascula\n"),this.contieneMinuscula(this.claveNueva)||(this.flag=!1,this.msjClave+="La contrase\xf1a debe poseer una min\xfascula\n"),this.contieneNumero(this.claveNueva)||(this.flag=!1,this.msjClave+="La contrase\xf1a debe poseer un n\xfamero\n"),this.contieneCaracterEspecial(this.claveNueva)||(this.flag=!1,this.msjClave+="La contrase\xf1a debe poseer un car\xe1cter especial\n"),this.claveNueva.length<=8&&(this.flag=!1,this.msjClave+="La contrase\xf1a debe tener al menos 8 caracteres de \nlongitud\n"))}claveRepValid(){this.msjRepClave="",0===this.claveRep.length?(this.flag=!1,this.msjRepClave="Debe llenar este campo"):this.claveRep!=this.claveNueva&&(this.flag=!1,this.msjRepClave+="La contrase\xf1a no se ha repetido correctamente\n")}claveOldValida(){this.msjClaveOld="",this.usuario.clave!==this.claveOld&&(this.flag=!1,this.msjClaveOld="La contrase\xf1a actual ingresada no es correcta")}contieneMayuscula(a){return/[A-Z]/.test(a)}contieneMinuscula(a){return/[a-z]/.test(a)}contieneCaracterEspecial(a){return/[!@#$%^&*()_+{}\[\]:;<>,.?~\\/-]/.test(a)}contieneNumero(a){return/\d/.test(a)}presentAlert(a){var i=this;return(0,g.Z)(function*(){yield(yield i.alerta.create({header:"Alerta",subHeader:"Mensaje importante",message:a,buttons:["Vale"]})).present()})()}ngOnInit(){this.sesion.fetchCorreoSesion().subscribe(a=>{this.correoUser=a}),this.bd.dbState().subscribe(a=>{a&&this.bd.buscarPorCorreo(this.correoUser).subscribe(i=>{this.usuario=i[0]})})}static#e=this.\u0275fac=function(i){return new(i||o)(e.Y36(u.F0),e.Y36(t._q),e.Y36(t.Br),e.Y36(m.N),e.Y36(v.J))};static#a=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-cambiar-contra"]],decls:42,vars:8,consts:[[1,"cabecera",3,"translucent"],[1,"logo-contenedor"],["src","/assets/logo.png","alt","No hay logo"],["color","paleta",1,"toolbar-c"],["slot","end",1,"boton-guesa"],[3,"click"],[1,"titulo",3,"click"],[1,"content-fondo",3,"fullscreen"],[1,"nombre-pag",2,"margin-top","10%"],[1,"contenedor-form"],["labelPlacement","stacked","label","Clave Actual","type","password","placeholder","Clave","maxlength","10",3,"ngModel","ngModelChange"],[1,"validacion"],["labelPlacement","stacked","label","Clave Nueva","type","password","placeholder","Clave","maxlength","10",3,"ngModel","ngModelChange"],["labelPlacement","stacked","label","Repetir Clave Nueva","type","password","placeholder","Clave","maxlength","10",3,"ngModel","ngModelChange"],[1,"contenedor-botones"],["shape","round",3,"click"]],template:function(i,n){1&i&&(e.TgZ(0,"ion-header",0)(1,"div",1),e._UZ(2,"ion-img",2),e.qZA(),e.TgZ(3,"ion-toolbar",3)(4,"ion-buttons",4)(5,"ion-menu-button",5),e.NdJ("click",function(){return n.abrirSuperior()}),e.qZA()(),e.TgZ(6,"ion-title",6),e.NdJ("click",function(){return n.irHomeCli()}),e._uU(7," Ivan's "),e.qZA()()(),e.TgZ(8,"ion-content",7)(9,"ion-grid")(10,"div")(11,"ion-row")(12,"ion-col")(13,"h1",8),e._uU(14,"Cambio de Contrase\xf1a"),e.qZA()()()(),e.TgZ(15,"div",9)(16,"ion-row")(17,"ion-col")(18,"ion-input",10),e.NdJ("ngModelChange",function(l){return n.claveOld=l}),e.qZA()()(),e.TgZ(19,"ion-row")(20,"ion-col")(21,"pre",11),e._uU(22),e.qZA()()(),e.TgZ(23,"ion-row")(24,"ion-col")(25,"ion-input",12),e.NdJ("ngModelChange",function(l){return n.claveNueva=l}),e.qZA()()(),e.TgZ(26,"ion-row")(27,"ion-col")(28,"pre",11),e._uU(29),e.qZA()()(),e.TgZ(30,"ion-row")(31,"ion-col")(32,"ion-input",13),e.NdJ("ngModelChange",function(l){return n.claveRep=l}),e.qZA()()(),e.TgZ(33,"ion-row")(34,"ion-col")(35,"pre",11),e._uU(36),e.qZA()()()(),e.TgZ(37,"div",14)(38,"ion-row")(39,"ion-col")(40,"ion-button",15),e.NdJ("click",function(){return n.envioValido()}),e._uU(41," Confirmar "),e.qZA()()()()()()),2&i&&(e.Q6J("translucent",!0),e.xp6(8),e.Q6J("fullscreen",!0),e.xp6(10),e.Q6J("ngModel",n.claveOld),e.xp6(4),e.Oqu(n.msjClaveOld),e.xp6(3),e.Q6J("ngModel",n.claveNueva),e.xp6(4),e.Oqu(n.msjClave),e.xp6(3),e.Q6J("ngModel",n.claveRep),e.xp6(4),e.Oqu(n.msjRepClave))},dependencies:[c.JJ,c.nD,c.On,t.YG,t.Sm,t.wI,t.W2,t.jY,t.Gu,t.Xz,t.pK,t.fG,t.Nd,t.wd,t.sr,t.j9],styles:[".contenedor-form[_ngcontent-%COMP%]{background:#cc0;color:#000;border:2px solid #000;border-radius:7px;align-items:center;text-align:left;margin-top:30%}.contenedor-form[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]{font-size:18px;font-weight:700;height:85%;width:100%;background:#fff;border:2px solid #000;border-radius:7px;text-align:left}.contenedor-botones[_ngcontent-%COMP%]{text-align:center}.contenedor-botones[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{font-size:15px;--background: #000;color:#fff;text-align:center}"]})}return o})()}];let C=(()=>{class o{static#e=this.\u0275fac=function(i){return new(i||o)};static#a=this.\u0275mod=e.oAB({type:o});static#t=this.\u0275inj=e.cJS({imports:[u.Bz.forChild(p),u.Bz]})}return o})(),f=(()=>{class o{static#e=this.\u0275fac=function(i){return new(i||o)};static#a=this.\u0275mod=e.oAB({type:o});static#t=this.\u0275inj=e.cJS({imports:[h.ez,c.u5,t.Pc,C]})}return o})()}}]);
"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5718],{5718:(j,m,c)=>{c.r(m),c.d(m,{EditarProdPageModule:()=>C});var g=c(6814),l=c(95),n=c(7852),d=c(7168),u=c(5861),e=c(6242),p=c(6506),f=c(6370);function b(a,h){if(1&a&&(e.TgZ(0,"ion-row")(1,"ion-col")(2,"div",26),e._UZ(3,"ion-img",27),e.qZA()()()),2&a){const t=e.oxw();e.xp6(3),e.Q6J("src",t.foto)}}function _(a,h){if(1&a&&(e.TgZ(0,"ion-select-option",28),e._uU(1),e.qZA()),2&a){const t=h.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t.nombrecategoria)}}function P(a,h){if(1&a&&(e.TgZ(0,"ion-select-option",28),e._uU(1),e.qZA()),2&a){const t=h.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t.nombre)}}const Z=[{path:"",component:(()=>{class a{constructor(t,o,i,s,r,T){this.router=t,this.alerta=o,this.activeRouter=i,this.menuCtrl=s,this.bd=r,this.camara=T,this.msjNombre="",this.msjDesc="",this.msjPrecio="",this.msjStock="",this.msjMedida="",this.msjCate="",this.id=0,this.nombre="",this.desc="",this.precio="",this.stock=0,this.medida="",this.categoria=0,this.flag=!0,this.msj="",this.codprod=0,this.producto=[{codprod:"",nombreprod:"",descripcion:"",precio:"",stock:"",foto:"",unidadmedida:"",categoriap:""}],this.categorias=[{idcategoria:"",nombrecategoria:""}],this.medidas=[{nombre:"Por unidad"},{nombre:"Por par"},{nombre:"Por metro"},{nombre:"Por docena"}]}abrirSuperior(){this.menuCtrl.enable(!0,"superior"),this.menuCtrl.open("superior")}abrirCategorias(){this.menuCtrl.enable(!0,"categorias"),this.menuCtrl.open("categorias")}irHomeAdm(){this.router.navigate(["home-adm"])}envioValido(){this.flag=!0,this.nombreValido(),this.descValida(),this.precioValido(),this.stockValido(),this.medidaValido(),this.categoriaValido(),!0===this.flag&&(this.editarProd(),this.bd.presentAlert("Producto editado con exito"),this.irHomeAdm())}nombreValido(){this.msjNombre="",0===this.nombre.length?(this.flag=!1,this.msjNombre="Debe llenar este campo"):(this.primerCaracterEsMayus(this.nombre)||(this.flag=!1,this.msjNombre+="La primera letra del nombre debe ser\n mayuscula\n"),this.nombre.length<=9&&(this.flag=!1,this.msjNombre+="La longitud del nombre debe ser \nmayor a 10 caracteres\n"))}descValida(){this.msjDesc="",0===this.desc.length?(this.flag=!1,this.msjDesc="Debe llenar este campo"):this.primerCaracterEsMayus(this.desc)?this.desc.length<=9&&(this.flag=!1,this.msjDesc+="La longitud de la descripci\xf3n debe ser \nmayor a 10 caracteres\n"):(this.flag=!1,this.msjDesc+="La primera letra de la descripci\xf3n debe ser\n mayuscula\n")}precioValido(){this.msjPrecio="",0===this.precio.length?(this.flag=!1,this.msjPrecio="Debe llenar este campo"):this.SoloNumeros(this.precio)?parseInt(this.precio)<=0&&(this.flag=!1,this.msjPrecio+="El precio no puede ser igual o menor a 0\n"):(this.flag=!1,this.msjPrecio+="El precio debe estar compuesto solo de n\xfameros\n")}stockValido(){this.msjStock="",0===String(this.stock).length?(this.flag=!1,this.msjStock="Debe llenar este campo"):this.stock<0&&(this.flag=!1,this.msjStock+="El stock no puede ser igual o menor a 0\n")}medidaValido(){this.msjMedida="",0===this.medida.length&&(this.flag=!1,this.msjMedida+="Debe seleccionar una unidad de medida\n")}categoriaValido(){this.msjCate="",0===this.categoria&&(this.flag=!1,this.msjCate+="Debe seleccionar una categor\xeda\n")}capturarImagen(){var t=this;return(0,u.Z)(function*(){t.foto=yield t.camara.takePicture()})()}primerCaracterEsMayus(t){const o=t.charAt(0);return/[A-Z]/.test(o)}SoloNumeros(t){return/^[0-9]+$/.test(t)}presentAlert(t){var o=this;return(0,u.Z)(function*(){yield(yield o.alerta.create({header:"Alerta",subHeader:"Mensaje importante",message:t,buttons:["Vale"]})).present()})()}editarProd(){this.bd.modificarProducto(this.id,this.nombre,this.desc,parseInt(this.precio),this.stock,this.foto,this.medidaseleccionada.nombre,this.categoriaseleccionada.idcategoria)}ngOnInit(){this.activeRouter.queryParams.subscribe(t=>{this.router.getCurrentNavigation()?.extras.state&&(this.codprod=this.router.getCurrentNavigation()?.extras?.state?.prodEnviar,this.bd.dbState().subscribe(o=>{o&&this.bd.fetchCategoria().subscribe(i=>{this.categorias=i,this.bd.buscarProducto(this.codprod),this.bd.fetchProducto().subscribe(s=>{this.producto=s[0],this.id=this.producto.codprod,this.nombre=this.producto.nombreprod,this.desc=this.producto.descripcion,this.precio=this.producto.precio,this.stock=this.producto.stock,this.medida=this.producto.unidadmedida,this.foto=this.producto.foto,this.categoria=this.producto.categoriap,this.categorias&&this.categorias.length>0&&(this.categoriaseleccionada=this.categorias.find(r=>r.idcategoria===this.categoria)),this.medidas&&this.medidas.length>0&&(this.medidaseleccionada=this.medidas.find(r=>r.nombre===this.medida))})})}))})}compareFn(t,o){return t&&o?t.idcategoria===o.idcategoria:t===o}compareMedidas(t,o){return t&&o?t.nombre===o.nombre:t===o}static#e=this.\u0275fac=function(o){return new(o||a)(e.Y36(d.F0),e.Y36(n.Br),e.Y36(d.gz),e.Y36(n._q),e.Y36(p.N),e.Y36(f.Y))};static#i=this.\u0275cmp=e.Xpm({type:a,selectors:[["app-editar-prod"]],decls:77,vars:20,consts:[[1,"cabecera",3,"translucent"],[1,"logo-contenedor"],["src","/assets/logo.png","alt","No hay logo"],["color","paleta",1,"toolbar-c"],["slot","end",1,"boton-guesa"],[3,"click"],[1,"titulo",3,"click"],[1,"categorias"],["fill","clear",3,"click"],[1,"content-fondo",3,"fullscreen"],[1,"nombre-pag"],[4,"ngIf"],[2,"text-align","center","margin","auto"],[1,"boton-subir",2,"text-align","center",3,"click"],["name","cloud-upload"],[1,"contenedor-form"],["labelPlacement","stacked","label","Nombre","type","text","placeholder","Nombre","minheight","10","maxheigth","30",3,"ngModel","ngModelChange"],[1,"validacion"],["labelPlacement","stacked","label","Categoria",3,"ngModel","compareWith","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["labelPlacement","stacked","label","Descripcion","type","text","placeholder","Descripcion","minlength","30","maxlength","200","value","Baterias alcalinas de tipo AA no recargables de la marca Duracell",3,"ngModel","ngModelChange"],["labelPlacement","stacked","label","Precio","type","text","placeholder","Precio","minlength","4","value","15000",3,"ngModel","ngModelChange"],["labelPlacement","stacked","label","Stock","type","number","placeholder","Stock","minlength","1","maxlength","6",3,"ngModel","ngModelChange"],["labelPlacement","stacked","label","Unidad Medida",3,"ngModel","compareWith","ngModelChange"],["shape","round"],["shape","round",3,"click"],[1,"contenedor-imagen"],["alt","No hay imagen :C",3,"src"],[3,"value"]],template:function(o,i){1&o&&(e.TgZ(0,"ion-header",0)(1,"div",1),e._UZ(2,"ion-img",2),e.qZA(),e.TgZ(3,"ion-toolbar",3)(4,"ion-buttons",4)(5,"ion-menu-button",5),e.NdJ("click",function(){return i.abrirSuperior()}),e.qZA()(),e.TgZ(6,"ion-title",6),e.NdJ("click",function(){return i.irHomeAdm()}),e._uU(7," Ivan's "),e.qZA()(),e.TgZ(8,"div",7)(9,"ion-button",8),e.NdJ("click",function(){return i.abrirCategorias()}),e._uU(10,"Categorias"),e.qZA()()(),e.TgZ(11,"ion-content",9)(12,"ion-grid")(13,"div")(14,"ion-row")(15,"ion-col")(16,"h1",10),e._uU(17),e.qZA()()()(),e.YNc(18,b,4,1,"ion-row",11),e.TgZ(19,"ion-row"),e._UZ(20,"ion-col"),e.TgZ(21,"ion-col",12)(22,"ion-button",13),e.NdJ("click",function(){return i.capturarImagen()}),e._UZ(23,"ion-icon",14),e._uU(24,"Subir imagen setz "),e.qZA()(),e._UZ(25,"ion-col"),e.qZA(),e.TgZ(26,"div",15)(27,"ion-row")(28,"ion-col")(29,"ion-input",16),e.NdJ("ngModelChange",function(r){return i.nombre=r}),e.qZA()()(),e.TgZ(30,"ion-row")(31,"ion-col")(32,"pre",17),e._uU(33),e.qZA()()(),e.TgZ(34,"ion-row")(35,"ion-col")(36,"ion-select",18),e.NdJ("ngModelChange",function(r){return i.categoriaseleccionada=r}),e.YNc(37,_,2,2,"ion-select-option",19),e.qZA()()(),e.TgZ(38,"ion-row")(39,"ion-col")(40,"pre",17),e._uU(41),e.qZA()()(),e.TgZ(42,"ion-row")(43,"ion-col")(44,"ion-textarea",20),e.NdJ("ngModelChange",function(r){return i.desc=r}),e.qZA()()(),e.TgZ(45,"ion-row")(46,"ion-col")(47,"pre",17),e._uU(48),e.qZA()()(),e.TgZ(49,"ion-row")(50,"ion-col")(51,"ion-input",21),e.NdJ("ngModelChange",function(r){return i.precio=r}),e.qZA()()(),e.TgZ(52,"ion-row")(53,"ion-col")(54,"pre",17),e._uU(55),e.qZA()()(),e.TgZ(56,"ion-row")(57,"ion-col")(58,"ion-input",22),e.NdJ("ngModelChange",function(r){return i.stock=r}),e.qZA()(),e.TgZ(59,"ion-col")(60,"ion-select",23),e.NdJ("ngModelChange",function(r){return i.medidaseleccionada=r}),e.YNc(61,P,2,2,"ion-select-option",19),e.qZA()()(),e.TgZ(62,"ion-row")(63,"ion-col")(64,"pre",17),e._uU(65),e.qZA()()(),e.TgZ(66,"ion-row")(67,"ion-col")(68,"pre",17),e._uU(69),e.qZA()()(),e.TgZ(70,"ion-row")(71,"ion-col")(72,"ion-button",24),e._uU(73," Limpiar "),e.qZA()(),e.TgZ(74,"ion-col")(75,"ion-button",25),e.NdJ("click",function(){return i.envioValido()}),e._uU(76," Confirmar "),e.qZA()()()()()()),2&o&&(e.Q6J("translucent",!0),e.xp6(11),e.Q6J("fullscreen",!0),e.xp6(6),e.Oqu(i.nombre),e.xp6(1),e.Q6J("ngIf",void 0!==i.foto),e.xp6(11),e.Q6J("ngModel",i.nombre),e.xp6(4),e.Oqu(i.msjNombre),e.xp6(3),e.Q6J("ngModel",i.categoriaseleccionada)("compareWith",i.compareFn),e.xp6(1),e.Q6J("ngForOf",i.categorias),e.xp6(4),e.Oqu(i.msjCate),e.xp6(3),e.Q6J("ngModel",i.desc),e.xp6(4),e.Oqu(i.msjDesc),e.xp6(3),e.Q6J("ngModel",i.precio),e.xp6(4),e.Oqu(i.msjPrecio),e.xp6(3),e.Q6J("ngModel",i.stock),e.xp6(2),e.Q6J("ngModel",i.medidaseleccionada)("compareWith",i.compareMedidas),e.xp6(1),e.Q6J("ngForOf",i.medidas),e.xp6(4),e.Oqu(i.msjMedida),e.xp6(4),e.Oqu(i.msjStock))},dependencies:[g.sg,g.O5,l.JJ,l.wO,l.nD,l.On,n.YG,n.Sm,n.wI,n.W2,n.jY,n.Gu,n.gu,n.Xz,n.pK,n.fG,n.Nd,n.t9,n.n0,n.g2,n.wd,n.sr,n.as,n.QI,n.j9],styles:[".contenedor-form[_ngcontent-%COMP%]   ion-textarea[_ngcontent-%COMP%]{font-size:21px;font-weight:700;height:85%;width:100%;background:#fff;border:2px solid #000;border-radius:7px;text-align:center}.contenedor-imagen[_ngcontent-%COMP%]{width:250px;height:250px;text-align:center;margin:auto}.contenedor-imagen[_ngcontent-%COMP%]   ion-img[_ngcontent-%COMP%]{width:100%;height:100%;border:2px solid #000}"]})}return a})()}];let M=(()=>{class a{static#e=this.\u0275fac=function(o){return new(o||a)};static#i=this.\u0275mod=e.oAB({type:a});static#t=this.\u0275inj=e.cJS({imports:[d.Bz.forChild(Z),d.Bz]})}return a})(),C=(()=>{class a{static#e=this.\u0275fac=function(o){return new(o||a)};static#i=this.\u0275mod=e.oAB({type:a});static#t=this.\u0275inj=e.cJS({imports:[g.ez,l.u5,n.Pc,M]})}return a})()}}]);